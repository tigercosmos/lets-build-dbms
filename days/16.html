
<!DOCTYPE HTML>
<html lang="" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>16: Good RDB Design with the Concept of Normal Forms Â· Let's build a DBMS: StellarSQL -- a minimal SQL DBMS written in Rust </title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.3">
        <meta name="author" content="tigercosmos">
        
        
    
    <link rel="stylesheet" href="../gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-expandable-chapters/expandable-chapters.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-disqus/plugin.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-codeblock-filename/block.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-highlight/website.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-search/search.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="../gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="17.html" />
    
    
    <link rel="prev" href="15.html" />
    

    <style>
    @media only screen and (max-width: 640px) {
        .book-header .hidden-mobile {
            display: none;
        }
    }
    </style>
    <script>
        window["gitbook-plugin-github-buttons"] = {"buttons":[{"user":"tigercosmos","repo":"lets-build-dbms","type":"star","size":"small","count":true},{"user":"tigercosmos","type":"follow","width":"180","size":"small","count":true}]};
    </script>

    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-84804118-5"></script><script>window.dataLayer = window.dataLayer || [];function gtag(){dataLayer.push(arguments);}gtag('js', new Date());gtag('config', 'UA-84804118-5');</script>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="Type to search" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="../">
            
                <a href="../">
            
                    
                    Let's build a DBMS
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="0.html">
            
                <a href="0.html">
            
                    
                    0: Introduction to the Series Articles
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3" data-path="1.html">
            
                <a href="1.html">
            
                    
                    1: Preparation & Basic Infrastructure
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4" data-path="2.html">
            
                <a href="2.html">
            
                    
                    2: Basic Concept of Server
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5" data-path="3.html">
            
                <a href="3.html">
            
                    
                    3: Frontend/Backend Protocol
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6" data-path="4.html">
            
                <a href="4.html">
            
                    
                    4: Client/Server Communication Implementation (1)
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7" data-path="5.html">
            
                <a href="5.html">
            
                    
                    5: Introduce to RDBMS and SQL
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8" data-path="6.html">
            
                <a href="6.html">
            
                    
                    6: Client/Server Communication Implementation (2)
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9" data-path="7.html">
            
                <a href="7.html">
            
                    
                    7: SQL Parser
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10" data-path="8.html">
            
                <a href="8.html">
            
                    
                    8: SQL Parser - Lexical Scanner
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.11" data-path="9.html">
            
                <a href="9.html">
            
                    
                    9: Lexical Scanner Implementation (1)
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.12" data-path="10.html">
            
                <a href="10.html">
            
                    
                    10: Lexical Scanner Implementation (2)
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.13" data-path="11.html">
            
                <a href="11.html">
            
                    
                    11: Lexical Scanner Implementation (3)
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.14" data-path="12.html">
            
                <a href="12.html">
            
                    
                    12: Lexical Scanner Case Study
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.15" data-path="13.html">
            
                <a href="13.html">
            
                    
                    13: Recursive Descent Parser
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.16" data-path="14.html">
            
                <a href="14.html">
            
                    
                    14: Lexical Scanner Implementation (4)
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.17" data-path="15.html">
            
                <a href="15.html">
            
                    
                    15: Lexical Scanner Implementation (5)
            
                </a>
            

            
        </li>
    
        <li class="chapter active" data-level="1.18" data-path="16.html">
            
                <a href="16.html">
            
                    
                    16: Good RDB Design with the Concept of Normal Forms
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.19" data-path="17.html">
            
                <a href="17.html">
            
                    
                    17: Parser Implementation (1)
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.20" data-path="18.html">
            
                <a href="18.html">
            
                    
                    18: Parser Implementation (2)
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.21" data-path="19.html">
            
                <a href="19.html">
            
                    
                    19: Parser Implementation (3): Understand SQL grammar
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.22" data-path="20.html">
            
                <a href="20.html">
            
                    
                    20: Parser Implementation (4)
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.23" data-path="21.html">
            
                <a href="21.html">
            
                    
                    21: First Implementation for Database Components
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.24" data-path="22.html">
            
                <a href="22.html">
            
                    
                    22: Update Components of Database
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.25" data-path="23.html">
            
                <a href="23.html">
            
                    
                    23: Implement Table insert_row
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.26" data-path="24.html">
            
                <a href="24.html">
            
                    
                    24: Different Client Design of DBMS
            
                </a>
            

            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href=".." >16: Good RDB Design with the Concept of Normal Forms</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <h1 id="16-good-rdb-design-with-the-concept-of-normal-forms">16: Good RDB Design with the Concept of Normal Forms</h1>
<p>2018/10/31</p>
<p>What is a good design for a relational database (RDB)?</p>
<p>You might have seen an excel data sheet filled with lots of columns. I can imagine that kind of excel sheet is very messy. A well designed database should design and create a model, and then implement the model into database.</p>
<p>For RDB, we use ER model. However, we might still design a model with deflects. For example, a table combines student information and department information.</p>
<p><img src="https://user-images.githubusercontent.com/18013815/47796068-8d2cfc00-dd5e-11e8-93c0-fe1a4f2b5c26.png" alt="student-department-table"></p>
<p>In this case, <code>DNUM</code> is followed by <code>SID</code>, but <code>DNAME</code> and <code>D_HEAD</code> are followed by <code>DNUM</code>. That&apos;s dangerous, because it might cause anomalies while inserting, deleting, or modifying a tuple of data.</p>
<p>This is an example of bad designs. So, I am going to introduce to 5 concept of normal forms.</p>
<p>When we create a RDB, we should not only base on ER model, but also need to consider that if the database are normal forms. Then we will have a good design database.</p>
<p>Concept of normal forms were first proposed by Codd in 1972.</p>
<ul>
<li>functional dependencies<ul>
<li>1st normal form</li>
<li>2nd normal form</li>
<li>3rd normal form</li>
</ul>
</li>
<li>multi-valued dependency<ul>
<li>4th normal form</li>
</ul>
</li>
<li>join dependency<ul>
<li>5th normal form</li>
</ul>
</li>
</ul>
<h2 id="first-normal-form">First Normal Form</h2>
<p>The value of an attribute should be an atomic value. It could not be multi-value, array, composite values, or any other relation. (ER model has already defined)</p>
<h2 id="second-normal-form">Second Normal Form</h2>
<p>Primary key could be a combination of keys. If a key of the primary key, could determine an attributes in the table, it is a partial relationship between the primary key and non-prime attributes. Then, it violates the second normal form.</p>
<p><img src="https://user-images.githubusercontent.com/18013815/47798537-8bb20280-dd63-11e8-9f91-19be17878859.png" alt="2ed example"></p>
<p>In this case, the primary key is <code>SID</code> and <code>PID</code>, and any attributes should be determined by the two. But, <code>SNAME</code> is only determined by <code>SID</code>, so it violates the rule. Therefore, this table should divide in three new tables to follow the concept.</p>
<h2 id="third-normal-form">Third Normal Form</h2>
<p>If there are attributes that follow a non-primary key, these attributes should be an another table. Just as the example:</p>
<p><img src="https://user-images.githubusercontent.com/18013815/47799601-966d9700-dd65-11e8-8435-a993870c7ca4.png" alt="third example"></p>
<h2 id="forth-normal-form">Forth Normal Form</h2>
<p>A table is in 4NF if and only if, for every one of its non-trivial multi-valued dependencies X &#x21A0; Y, X is a superkey. That is, X is either a candidate key or a superset thereof.</p>
<p>Removing &#x201C;bad&#x201D; multi-valued dependencies help us get into 4th normal.
form, and into better design.</p>
<p>Considering the following example:</p>
<p>In this case, both <code>Pizza Variety</code> and <code>Delivery Area</code> are determined by <code>Restaurant</code>, and the two should be a combination.</p>
<p><img src="https://user-images.githubusercontent.com/18013815/47800322-06305180-dd67-11e8-981f-9f623759f13a.png" alt="4th"></p>
<p>If <code>Pizza Variety</code> and <code>Delivery Area</code> are independent to each other, it violates 4NF. Because, if restaurant <code>Pizza A1</code> add a new kind pizza <code>Cheese Pizza</code>, it need to add three rows for the three locations that in the table. (Because <code>Pizza Variety</code> is not binding <code>Delivery Area</code>, any <code>Delivery Area</code> should have this new <code>Pizza Variety</code>)</p>
<p>In other words, adding a new kind of pizza, the table need to insert rows, which is the new pizza with each area, and it is easy to make errors when updating. To eliminate the possibility of these anomalies, 4NF suggests that the table should be split.</p>
<p><img src="https://user-images.githubusercontent.com/18013815/47800323-06c8e800-dd67-11e8-8bce-f63a8216e22a.png" alt="4th-2"></p>
<h2 id="fifth-normal-form">Fifth Normal Form</h2>
<p>Assume the table meets 1NF to 4NF.</p>
<p>Considering a table that has <code>Traveling Salesman</code>(primary key), <code>Brand</code> and <code>Product</code>.</p>
<p>Imagining a extreme case:</p>
<p>A <code>Traveling Salesman</code> has certain <code>Brand</code>s and certain <code>Product</code> Types in their repertoire. If <code>Brand</code> B1 and <code>Brand</code> B2 are in their repertoire, and <code>Product</code> Type P is in their repertoire, then (assuming <code>Brand</code> B1 and <code>Brand</code> B2 both make Product Type P,) the <code>Traveling Salesman</code> must offer products of Product Type P those made by Brand B1 and those made by Brand B2.</p>
<p>That is to say, the <code>Brand</code> and <code>Product</code> are combined (4NF), the <code>Salesman</code> is not able to only sale a certain <code>Brand</code> but exclude one of products of that <code>Brand</code>.</p>
<p>Then to solve this, splitting the able to three would make sense.</p>
<ul>
<li><code>Traveling Salesman</code> with <code>Brand</code></li>
<li><code>Traveling Salesman</code> with <code>Product</code></li>
<li><code>Brand</code> with <code>Product</code></li>
</ul>
<h2 id="conclusion">Conclusion</h2>
<p>ER model is good for RDB, but the database might easily makes error if we design not well.</p>
<p>Following these concept of normal forms would reduce the possibility of anomalies, which makes the database more clear and reliable.</p>

                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="15.html" class="navigation navigation-prev " aria-label="Previous page: 15: Lexical Scanner Implementation (5)">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="17.html" class="navigation navigation-next " aria-label="Next page: 17: Parser Implementation (1)">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"16: Good RDB Design with the Concept of Normal Forms","level":"1.18","depth":1,"next":{"title":"17: Parser Implementation (1)","level":"1.19","depth":1,"path":"days/17.md","ref":"days/17.md","articles":[]},"previous":{"title":"15: Lexical Scanner Implementation (5)","level":"1.17","depth":1,"path":"days/15.md","ref":"days/15.md","articles":[]},"dir":"ltr"},"config":{"plugins":["expandable-chapters","github-buttons@3.0.0","github","disqus","codeblock-filename","custom-favicon"],"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"pluginsConfig":{"disqus":{"useIdentifier":false,"shortName":"lets-build-dbms"},"github":{"url":"https://github.com/tigercosmos/"},"search":{},"lunr":{"maxIndexSize":1000000,"ignoreSpecialCharacters":false},"fontsettings":{"theme":"white","family":"sans","size":2},"highlight":{},"favicon":"./favicon.ico","codeblock-filename":{},"github-buttons":{"buttons":[{"user":"tigercosmos","repo":"lets-build-dbms","type":"star","size":"small","count":true},{"user":"tigercosmos","type":"follow","width":"180","size":"small","count":true}]},"custom-favicon":{},"sharing":{"facebook":true,"twitter":true,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false},"expandable-chapters":{}},"theme":"default","author":"tigercosmos","pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"variables":{},"title":"Let's build a DBMS: StellarSQL -- a minimal SQL DBMS written in Rust ","gitbook":"*","description":""},"file":{"path":"days/16.md","mtime":"2018-11-08T15:59:48.640Z","type":"markdown"},"gitbook":{"version":"3.2.3","time":"2018-11-08T16:00:47.858Z"},"basePath":"..","book":{"language":""}});
        });
    </script>
</div>

        
    <script src="../gitbook/gitbook.js"></script>
    <script src="../gitbook/theme.js"></script>
    
        
        <script src="../gitbook/gitbook-plugin-expandable-chapters/expandable-chapters.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-github-buttons/plugin.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-github/plugin.js"></script>
        
    
        
        <script src="https://cdnjs.cloudflare.com/ajax/libs/URI.js/1.16.1/URI.min.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-disqus/plugin.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-search/search-engine.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-sharing/buttons.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>

